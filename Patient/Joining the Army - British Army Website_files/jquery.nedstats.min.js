$(function(){if($(".addthis_button").length>0){if(addthis){addthis.addEventListener("addthis.menu.open",eventHandler);addthis.addEventListener("addthis.menu.share",eventHandler)}}});var countername;function eventHandler(b){if(b.type=="addthis.menu.share"){var a=countername+".bookmark_and_share."+b.data.service+".link";ns_onclick(this,"",a,"")}else{if((b.type=="addthis.menu.open")&&(b.data.pane=="email")){var a=countername+".bookmark_and_share."+b.data.pane+".link";ns_onclick(this,"",a,"")}}}function styleLinks(a){if(a.lastIndexOf(".page")>0){countername=a.slice(0,a.lastIndexOf(".page"))}else{countername=a}var b=$("body");b.find("a[href*='http://'],a[href*='https://']").filter(function(){var c=this.hostname.replace(/www./i,"");var d=location.hostname.replace(/www./i,"");return c!==d}).attr("target","_blank").attr("title","This link will open in a new window");b.find("a[href*='.pdf'],a[href*='.doc'],a[href*='.xls'],a[href*='.ppt']").not("a[name=modal]").attr("target","_blank").attr("title","This document will open in a new window").click(function(){var e=formatText($(this).attr("rel"));var d=formatText($(this).children("span").text());var c=countername+"."+e+"."+d;ns_onclick(this,"",c,e);return false});b.find(".right-panel a").not("a[href*=.pdf],a[href*=.doc],a[href*=.xls],a[href*=.ppt]").click(function(){var d=$(this).attr("href");if(d.match(/http/i)!=null&&d.match(/mod/i)==null){var c=countername+".link."+formatText($(this).text());ns_onclick(this,"",c,"clickout")}else{var c=countername+".rhp."+formatText($(this).text())+".link";ns_onclick(this,"",c,"")}return false});b.find(".LinkButton a, .tagging a, .PanelLink a").not("a[href*=.pdf],a[href*=.doc],a[href*=.xls],a[href*=.ppt]").click(function(){var d=$(this).attr("href");if(d.match(/http/i)!=null&&d.match(/mod/i)==null){var c=countername+".link."+formatText($(this).text());ns_onclick(this,"",c,"clickout")}else{var c=countername+"."+formatText($(this).text())+".link";ns_onclick(this,"",c,"")}return false})}function formatText(a){a=a.replace(/<[^>]*>/gi,"");a=a.replace(/"/gi,"");a=a.replace(/</gi,"");a=a.replace(/>/gi,"");a=a.replace(/ /gi,"");a=a.replace(/&/gi,"");a=a.replace(/[^\w-\s]+/gi,"");a=a.replace(/[\s]+/gi,"_");return a.toLowerCase()};